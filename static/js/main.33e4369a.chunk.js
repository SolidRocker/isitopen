(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,a){},144:function(e,t,a){},146:function(e,t,a){},148:function(e,t,a){},150:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(33),l=a.n(s),i=(a(77),a(5)),o=a(6),c=a(10),u=a(7),m=a(9),p=a(8),d=a(21),h=a(71),E=a(3),f={items:[],IDs:[],filterName:"",filterDay:"",filterTime:-1,filterType:-1,filterCount:0},y={items:[],IDs:[],shareList:[],rList:[]},b={cUser:{},cUserEmail:"",isLoggedIn:!1},v=Object(d.c)({entries:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ENTRIES":return Object(E.a)({},e,{items:t.payload,IDs:t.payloadID});case"FILTER_ENTRIES_NAME":return Object(E.a)({},e,{filterName:t.payload});case"FILTER_ENTRIES_DAY":return Object(E.a)({},e,{filterDay:t.payload});case"FILTER_ENTRIES_TIME":return Object(E.a)({},e,{filterTime:t.payload});case"UPDATE_FILTER_TYPE":return Object(E.a)({},e,{filterType:t.payload});case"FILTER_RESET_NAME":return Object(E.a)({},e,{filterName:""});case"FILTER_RESET_DAYTIME":return Object(E.a)({},e,{filterDay:"",filterTime:-1});case"FILTER_COUNT":return Object(E.a)({},e,{filterCount:t.payload});default:return e}},collections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS":return Object(E.a)({},e,{items:t.payload,IDs:t.payloadID});case"RENAME_LIST":return Object(E.a)({},e,{friendList:t.payload,friendListCIDs:t.friendListCIDs,friendListEmails:t.payloadEmails});case"GET_SHARE_LIST":return Object(E.a)({},e,{shareList:t.payload});case"ADD_SHARE_LIST":return Object(E.a)({},e,{rList:t.payload});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object(E.a)({},e,{isLoggedIn:t.payload});case"UPDATE_USER":return Object(E.a)({},e,{cUser:t.payload,cUserEmail:t.payloadEmail});case"GET_USER":return Object(E.a)({},e,{cUser:t.payload});default:return e}}}),g=[h.a],N=Object(d.d)(v,{},d.a.apply(void 0,g)),S=a(2),I=a(27),T=a.n(I),D=[{value:0,label:"By Name"},{value:1,label:"By Time"}],L=[],C=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],O=[{value:0,label:"12:00am - 1:00am"},{value:100,label:"1:00am - 2:00am"},{value:200,label:"2:00am - 3:00am"},{value:300,label:"3:00am - 4:00am"},{value:400,label:"4:00am - 5:00am"},{value:500,label:"5:00am - 6:00am"},{value:600,label:"6:00am - 7:00am"},{value:700,label:"7:00am - 8:00am"},{value:800,label:"8:00am - 9:00am"},{value:900,label:"9:00am - 10:00am"},{value:1e3,label:"10:00am - 11:00am"},{value:1100,label:"11:00am - 12:00pm"},{value:1210,label:"12:00pm - 1:00pm"},{value:1300,label:"1:00pm - 2:00pm"},{value:1400,label:"2:00pm - 3:00pm"},{value:1500,label:"3:00pm - 4:00pm"},{value:1600,label:"4:00pm - 5:00pm"},{value:1700,label:"5:00pm - 6:00pm"},{value:1800,label:"6:00pm - 7:00pm"},{value:1900,label:"7:00pm - 8:00pm"},{value:2e3,label:"8:00pm - 9:00pm"},{value:2100,label:"9:00pm - 10:00pm"},{value:2200,label:"10:00pm - 11:00pm"},{value:2300,label:"11:00pm - 12:00am"}],k=a(12),U=(a(84),a(55));U.initializeApp({apiKey:"AIzaSyBInD94CgoHB6Z6tR1qooFIahjVIUd6uMg",authDomain:"glints-d7a40.firebaseapp.com",databaseURL:"https://glints-d7a40.firebaseio.com",projectId:"glints-d7a40",storageBucket:"glints-d7a40.appspot.com",messagingSenderId:"528186558960"});var j=U.firestore(),w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSelectType=function(e){a.populateNameList(),a.setState({fTypeID:e.value,fTypeString:e.label},function(){a.props.filterUpdateType(a.state.fTypeID),a.resetFilters()})},a.onSelectName=function(e){a.props.filterEntryByName(e.label),a.setState({fNameString:e.label})},a.onSelectDay=function(e){a.props.filterEntryByDay(e.label.substring(0,3).toString().toLowerCase()),a.setState({fDayString:e.label})},a.onSelectTime=function(e){a.props.filterEntryByTime(e.value),a.setState({fTimeString:e.label})},a.state={fTypeID:-1,fTypeString:"",fNameString:"",fDayString:"",fTimeString:"",bIsNamesPopulate:!1},a.onSelectType=a.onSelectType.bind(Object(S.a)(Object(S.a)(a))),a.onSelectName=a.onSelectName.bind(Object(S.a)(Object(S.a)(a))),a.onSelectDay=a.onSelectDay.bind(Object(S.a)(Object(S.a)(a))),a.onSelectTime=a.onSelectTime.bind(Object(S.a)(Object(S.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.filterUpdateType(this.state.fTypeID)}},{key:"resetFilters",value:function(){this.setState({fNameString:"",fDayString:"",fTimeString:""})}},{key:"populateNameList",value:function(){if(!this.state.bIsNamesPopulate){for(var e=!1,t=0;t<this.props.entrylength;++t){e=!1;for(var a=0;a<t;++a)if(t===a||this.props.entries[t].name===this.props.entries[a].name){e=!0;break}if(!e){var n={value:t,label:this.props.entries[t].name};L.push(n)}}this.setState({bIsNamesPopulate:!0})}}},{key:"renderFilterSubHeader1",value:function(){return 0===this.state.fTypeID?r.a.createElement("th",{className:"Dropdown-header-rname"},"FILTER NAME"):1===this.state.fTypeID?r.a.createElement("th",{className:"Dropdown-header-day"},"FILTER DAY"):r.a.createElement("th",{className:"Dropdown-header-rname"},"FILTER LIST")}},{key:"renderFilterSubHeader2",value:function(){var e=null;return 1===this.state.fTypeID&&(e=r.a.createElement("th",{className:"Dropdown-header-time"},"FILTER TIME")),e}},{key:"renderFilterSubDropdown1",value:function(){var e=null;return-1===this.state.fTypeID?e=r.a.createElement("td",null," ",r.a.createElement(T.a,{disabled:!0,arrowClosed:r.a.createElement("span",{className:"Dropdown-icon"},r.a.createElement(k.a,null)),arrowOpen:r.a.createElement("span",{className:"Dropdown-icon"},r.a.createElement(k.b,null)),className:"Dropdown-class-disabled",placeholder:"Choose A FilterType...",controlClassName:"Dropdown-control"})):0===this.state.fTypeID?e=r.a.createElement("td",null," ",r.a.createElement(T.a,{arrowClosed:r.a.createElement("span",{className:"Dropdown-icon"},r.a.createElement(k.a,null)),arrowOpen:r.a.createElement("span",{className:"Dropdown-icon"},r.a.createElement(k.b,null)),options:L,onChange:this.onSelectName,value:this.state.fNameString,placeholder:"Filter Name...",className:"Dropdown-class-rname",controlClassName:"Dropdown-control",menuClassName:"Dropdown-menu-name"})):1===this.state.fTypeID&&(e=r.a.createElement("td",null," ",r.a.createElement(T.a,{arrowClosed:r.a.createElement("span",{className:"Dropdown-icon"},r.a.createElement(k.a,null)),arrowOpen:r.a.createElement("span",{className:"Dropdown-icon"},r.a.createElement(k.b,null)),options:C,onChange:this.onSelectDay,value:this.state.fDayString,placeholder:"Filter Day...",className:"Dropdown-class-day",controlClassName:"Dropdown-control",menuClassName:"Dropdown-menu-day"}))),e}},{key:"renderFilterSubDropdown2",value:function(){var e=null;return 1===this.state.fTypeID&&(e=r.a.createElement("td",null," ",r.a.createElement(T.a,{arrowClosed:r.a.createElement("span",{className:"Dropdown-icon"},r.a.createElement(k.a,null)),arrowOpen:r.a.createElement("span",{className:"Dropdown-icon"},r.a.createElement(k.b,null)),options:O,onChange:this.onSelectTime,value:this.state.fTimeString,placeholder:"Filter Time...",className:"Dropdown-class-time",controlClassName:"Dropdown-control",menuClassName:"Dropdown-menu-time"}))),e}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("table",{className:"Dropdown-section"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"Dropdown-header-type"},"FILTER TYPE"),this.renderFilterSubHeader1(),this.renderFilterSubHeader2()),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(T.a,{arrowClosed:r.a.createElement("span",{className:"Dropdown-icon"},r.a.createElement(k.a,null)),arrowOpen:r.a.createElement("span",{className:"Dropdown-icon"},r.a.createElement(k.b,null)),options:D,onChange:this.onSelectType,value:this.state.fTypeString,placeholder:"Filter Type...",className:"Dropdown-class-type",controlClassName:"Dropdown-control",menuClassName:"Dropdown-menu-type"})),this.renderFilterSubDropdown1(),this.renderFilterSubDropdown2()))))}}]),t}(n.Component),R=Object(p.b)(function(e){return{entries:e.entries.items,entrylength:e.entries.items.length,filterName:e.entries.filterName,filterCount:e.entries.filterCount}},{filterEntryByName:function(e){return function(t){t({type:"FILTER_ENTRIES_NAME",payload:e})}},filterEntryByDay:function(e){return function(t){t({type:"FILTER_ENTRIES_DAY",payload:e})}},filterEntryByTime:function(e){return function(t){t({type:"FILTER_ENTRIES_TIME",payload:e})}},filterUpdateType:function(e){return function(t){t({type:"UPDATE_FILTER_TYPE",payload:e}),t({type:"FILTER_RESET_NAME"}),t({type:"FILTER_RESET_DAYTIME"})}}})(w),A=a(11),F=function(e){return function(t){var a={};j.collection("users").doc(e).get().then(function(e){e.exists&&(a=e.data())}).then(function(){return t({type:"GET_USER",payload:a})})}},_=(a(141),a(69),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).renderEntry=function(e){var t=a.generateRandomID();return r.a.createElement("tr",{key:t,className:"tr-entries"},r.a.createElement("td",{key:t+1},e.name),r.a.createElement("td",{key:t+2},e.dispHours),r.a.createElement("td",{key:t+3,style:{textAlign:"center"}},a.renderAddList(e.name)))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchEntry()}},{key:"generateRandomID",value:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<5;++a)e+=t.charAt(Math.floor(Math.random()*t.length));return e}},{key:"getNextDayString",value:function(e){switch(e){case"mon":return"tue";case"tue":return"wed";case"wed":return"thu";case"thu":return"fri";case"fri":return"sat";case"sat":return"sun";case"sun":return"mon";default:return"default"}}},{key:"isOpen",value:function(e){if(""===this.props.filterDay||-1===this.props.filterTime)return!0;var t,a;if(t=e.openhours.hasOwnProperty(this.props.filterDay)?e.openhours[this.props.filterDay]:e.openhours.default,(a=e.closehours.hasOwnProperty(this.props.filterDay)?e.closehours[this.props.filterDay]:e.closehours.default)<t){var n=this.getNextDayString(this.props.filterDay);return a=e.closehours.hasOwnProperty(n)?e.closehours[n]:e.closehours.default,!(t>=this.props.filterTime&&a<this.props.filterTime+100)}return t<=this.props.filterTime&&a>this.props.filterTime+100}},{key:"renderAddCollectionText",value:function(){for(var e=0;e<3;++e)if(this.props.cUser.lists[e].isCreated)return"Choose a list to add the restaurant to.";return"Please create at least 1 list before adding restaurants!"}},{key:"renderAddListButton",value:function(e,t,a){var n=this,s=null;if(!this.props.cUser.lists[e].isCreated)return s;for(var l=!1,i=0;i<this.props.cUser.lists[e].restaurants.length;++i)if(t===this.props.cUser.lists[e].restaurants[i]){l=!0;break}return s=l?r.a.createElement("span",null,r.a.createElement(A.a,{lockScroll:!0,trigger:r.a.createElement("button",{className:"modal-button"+e},this.props.cUser.lists[e].name),modal:!0},function(s){return r.a.createElement("div",null,r.a.createElement("div",{className:"modal-header"},"RESTAURANT ALREADY EXIST"),r.a.createElement("div",{className:"modal-content"},t," already exists in Collection ",n.props.cUser.lists[e].name,"."),r.a.createElement("span",null,r.a.createElement("button",{className:"modal-button-ok",onClick:function(){s(),a()}},"OK")))})):r.a.createElement("span",null,r.a.createElement(A.a,{lockScroll:!0,trigger:r.a.createElement("button",{className:"modal-button"+e},this.props.cUser.lists[e].name),modal:!0},function(s){return r.a.createElement("div",null,r.a.createElement("div",{className:"modal-header"},"RESTAURANT ADDED!"),r.a.createElement("div",{className:"modal-content"},t," successfully added to ",n.props.cUser.lists[e].name,"!"),r.a.createElement("span",null,r.a.createElement("button",{className:"modal-button-ok",onClick:function(){s(),a(),n.props.addToList(n.props.cUserEmail,e,t,n.props.getUser)}},"OK")))}))}},{key:"renderAddList",value:function(e){var t=this;return r.a.createElement(A.a,{lockScroll:!0,trigger:r.a.createElement("button",{disabled:!this.props.isLoggedIn,className:"button"},this.props.isLoggedIn?"Add To Collection":"Login To View"),modal:!0},function(a){return r.a.createElement("div",{className:"modal-section"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("span",{className:"modal-button-crossicon",onClick:function(){a()}},"\xd7"),"ADD RESTAURANT TO COLLECTION"),r.a.createElement("div",{className:"modal-content"},t.renderAddCollectionText()),t.renderAddListButton(0,e,a),t.renderAddListButton(1,e,a),t.renderAddListButton(2,e,a))})}},{key:"renderHeader",value:function(){var e=this.generateRandomID();return r.a.createElement("tr",{key:e},r.a.createElement("th",{key:e+1,className:"header-restaurant"},"RESTAURANT"),r.a.createElement("th",{key:e+2,className:"header-hours"},"OPENING HOURS"),r.a.createElement("th",{key:e+3,style:{textAlign:"center"},className:"header-support"},"COLLECTION"))}},{key:"renderEntries",value:function(){var e=this;return 0===this.props.filterType&&""!==this.props.filterName?this.props.entries.map(function(t){return t.name===e.props.filterName?e.renderEntry(t):null}):1===this.props.filterType?this.props.entries.map(function(t){return e.isOpen(t)?e.renderEntry(t):null}):this.props.entries.map(function(t){return e.renderEntry(t)})}},{key:"render",value:function(){var e=this.renderEntries();return r.a.createElement("table",{style:{textAlign:"left"}},r.a.createElement("tbody",null,this.renderHeader(),e))}}]),t}(n.Component)),x=Object(p.b)(function(e){return{entries:e.entries.items,cUser:e.login.cUser,cUserEmail:e.login.cUserEmail,isLoggedIn:e.login.isLoggedIn,filterName:e.entries.filterName,filterDay:e.entries.filterDay,filterTime:e.entries.filterTime,filterType:e.entries.filterType,filterCount:e.entries.filterCount}},{fetchEntry:function(){return function(e){var t=[],a=[];j.collection("restaurants").get().then(function(e){e.docs.forEach(function(e){var n=e.data(),r=e.id;t.push(n),a.push(r)})}).then(function(){return e({type:"FETCH_ENTRIES",payload:t,payloadID:a})})}},filterCount:function(e){return function(t){t({type:"FILTER_COUNT",payload:e})}},addToList:function(e,t,a,n){return function(r){var s={};j.collection("users").doc(e).get().then(function(e){e.exists&&(s=e.data())}).then(function(){s.lists[t].restaurants.push(a)}).then(function(){j.collection("users").doc(e).set(s)}).then(function(){n(e)})}},getUser:F})(_),P=(a(144),a(146),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).shareWithFriend=function(){if(a.state.friendEmail!==a.props.cUserEmail){for(var e=!1,t=0;t<a.props.userIDs.length;++t)if(a.props.userIDs[t]===a.state.friendEmail){e=!0;break}if(e){var n=!1;for(t=0;t<a.props.cUser.shares.length;++t)if(a.props.cUser.shares[t].email===a.state.friendEmail&&a.props.cUser.shares[t].cID===a.state.cID){n=!0;break}return n?void a.setState({pTitle:"SHARING ERROR",pDesc:"The user already has this list!",displayPopup:!0}):(a.setState({pTitle:"SHARING SUCCESSFUL",pDesc:a.props.cUser.lists[a.state.cID].name+" collection successfully shared with "+a.state.friendEmail+"!",displayPopup:!0}),void a.props.shareList(a.props.cUserEmail,a.state.friendEmail,a.state.cID))}a.setState({pTitle:"CANNOT FIND USER",pDesc:"Cannot find user "+a.state.friendEmail+"!",displayPopup:!0})}else a.setState({pTitle:"SHARING ERROR",pDesc:"Cannot share collections with yourself!",displayPopup:!0})},a.state={cID:a.props.id,textInput:"",renameListInput:"",friendEmail:"",displayPopup:!1,pTitle:"",pDesc:"",isShared:a.props.isShared,sharedName:a.props.sharedName,sharedID:a.props.sharedID,sharedEmail:a.props.sharedEmail},a.createList=a.createList.bind(Object(S.a)(Object(S.a)(a))),a.changeName=a.changeName.bind(Object(S.a)(Object(S.a)(a))),a.shareWithFriend=a.shareWithFriend.bind(Object(S.a)(Object(S.a)(a))),a.createListTextChange=a.createListTextChange.bind(Object(S.a)(Object(S.a)(a))),a.shareListUserChange=a.shareListUserChange.bind(Object(S.a)(Object(S.a)(a))),a.renameListChange=a.renameListChange.bind(Object(S.a)(Object(S.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"createList",value:function(e){null!=this.state.textInput&&(this.props.initList(this.props.cUserEmail,this.state.cID,this.state.textInput,this.props.getUser),e())}},{key:"changeName",value:function(e,t){var a=this;return r.a.createElement(A.a,{lockScroll:!0,trigger:r.a.createElement("button",{className:"modal-button-ok",disabled:""===this.state.renameListInput},"Change"),modal:!0},function(n){return r.a.createElement("div",{className:"modal-section"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("span",{className:"modal-button-crossicon",onClick:function(){n()}},"\xd7"),"COLLECTION RENAMED"),r.a.createElement("div",{className:"modal-content"},"Collection successfully renamed!"),r.a.createElement("span",null,r.a.createElement("button",{className:"modal-button-ok",onClick:function(){a.state.isShared?a.props.renameList(a.state.sharedEmail,a.state.cID,a.state.renameListInput):a.props.renameList(a.props.cUserEmail,a.state.cID,a.state.renameListInput,a.props.getUser),n(),t(),e()}},"Back")))})}},{key:"renameList",value:function(e){var t=this;return r.a.createElement(A.a,{lockScroll:!0,trigger:r.a.createElement("button",{className:"modal-button-ok"},"Rename"),modal:!0},function(a){return r.a.createElement("div",{className:"modal-section"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("span",{className:"modal-button-crossicon",onClick:function(){a()}},"\xd7"),"RENAME COLLECTION"),r.a.createElement("div",{className:"modal-content"},"Rename Collection:"),r.a.createElement("div",null,r.a.createElement("input",{className:"modal-input",type:"text",name:"Share Name",value:t.state.renameListInput,onChange:t.renameListChange})),t.changeName(e,a))})}},{key:"viewList",value:function(){if(!this.props.cUser.lists[this.state.cID].isCreated)return this.createList();var e=this.props.cUser.lists[this.state.cID].restaurants.map(function(e,t){return r.a.createElement("div",{key:t},e)});return 0===e.length&&(e="This collection is empty."),e}},{key:"viewSharedList",value:function(){for(var e=[],t=!1,a=0;a<this.props.userIDs.length&&!t;++a)if(this.props.userIDs[a]===this.state.sharedEmail){t=!0;for(var n=0;n<this.props.users[a].lists[this.state.cID].restaurants.length;++n)e.push(this.props.users[a].lists[this.state.cID].restaurants[n])}var s=e.map(function(e,t){return r.a.createElement("div",{key:t},e)});return 0===e.length&&(s="This collection is empty."),s}},{key:"getStyling",value:function(){return this.state.isShared?"list-button-shared":"list-button"+this.state.cID}},{key:"renameListChange",value:function(e){this.setState({renameListInput:e.target.value})}},{key:"shareListUserChange",value:function(e){this.setState({friendEmail:e.target.value})}},{key:"createListTextChange",value:function(e){this.setState({textInput:e.target.value})}},{key:"processListSelection",value:function(){var e=this;return this.state.isShared?function(t){return r.a.createElement("div",{className:"modal-section"},r.a.createElement("div",{className:"modal-header"},e.state.sharedName,r.a.createElement("span",{className:"modal-button-crossicon",onClick:function(){t()}},"\xd7"),"\xa0collection"),r.a.createElement("div",{className:"modal-content"},e.viewSharedList()),e.renameList(t),r.a.createElement("span",null,r.a.createElement("button",{className:"modal-button-ok",onClick:function(){t()}},"Close")))}:this.props.cUser.lists[this.state.cID].isCreated?function(t){return r.a.createElement("div",{className:"modal-section"},r.a.createElement("div",{className:"modal-header"},e.props.cUser.lists[e.state.cID].name,r.a.createElement("span",{className:"modal-button-crossicon",onClick:function(){t()}},"\xd7"),"\xa0collection"),r.a.createElement("div",{className:"modal-content"},e.viewList()),e.renderShareButton(t),e.renameList(t),r.a.createElement("span",null,r.a.createElement("button",{className:"modal-button-ok",onClick:function(){t()}},"Close")))}:function(t){return r.a.createElement("div",{className:"modal-section"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("span",{className:"modal-button-crossicon",onClick:function(){t()}},"\xd7"),"CREATE NEW COLLECTION"),r.a.createElement("div",{className:"modal-content"},"Enter a name for the new collection"),r.a.createElement("div",null,r.a.createElement("input",{className:"modal-input",type:"text",name:"Collection Name",value:e.state.textInput,onChange:e.createListTextChange})),r.a.createElement("span",null,r.a.createElement("button",{className:"modal-button-ok",disabled:""===e.state.textInput,onClick:function(){return e.createList(t)}},"Create")))}}},{key:"renderShareButton",value:function(e){var t=this;return r.a.createElement(A.a,{lockScroll:!0,trigger:r.a.createElement("button",{className:"modal-button-share"},"Share"),modal:!0},function(e){return r.a.createElement("div",{className:"modal-section"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("span",{className:"modal-button-crossicon",onClick:function(){e()}},"\xd7"),"SHARE COLLECTION"),r.a.createElement("div",{className:"modal-content"},"Who do you want to share the list with?"),r.a.createElement("div",null,r.a.createElement("input",{className:"modal-input",type:"text",name:"Share Name",value:t.state.friendEmail,onChange:t.shareListUserChange})),r.a.createElement("span",null,r.a.createElement("button",{className:"modal-button-ok",disabled:""===t.state.friendEmail,onClick:function(){return t.shareWithFriend()}},"Share")),t.displayGenericPopup())})}},{key:"displayGenericPopup",value:function(){var e=this;if(this.state.displayPopup)return r.a.createElement(A.a,{lockScroll:!0,open:this.state.displayPopup,modal:!0},function(t){return r.a.createElement("div",{className:"modal-section"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("span",{className:"modal-button-crossicon",onClick:function(){t()}},"\xd7"),e.state.pTitle),r.a.createElement("div",{className:"modal-content"},e.state.pDesc,r.a.createElement("br",null),"\xa0"),r.a.createElement("span",null,r.a.createElement("button",{className:"modal-button-ok",disabled:""===e.state.createListTextChange,onClick:function(){e.setState({displayPopup:!1}),t()}},"Back")))})}},{key:"renderListName",value:function(){return this.state.isShared?this.state.sharedName:this.props.cUser&&this.props.cUser.lists&&this.props.cUser.lists[this.state.cID]&&this.props.cUser.lists[this.state.cID].name?this.props.cUser.lists[this.state.cID].name:null}},{key:"render",value:function(){var e=this;return r.a.createElement(A.a,{lockScroll:!0,trigger:r.a.createElement("button",{className:this.getStyling(),onClick:function(){return e.onClickList()}},this.renderListName()),modal:!0},this.processListSelection())}}]),t}(n.Component)),H=Object(p.b)(function(e){return{users:e.collections.items,userIDs:e.collections.IDs,rList:e.collections.rList,cUser:e.login.cUser,cUserEmail:e.login.cUserEmail}},{initList:function(e,t,a,n){return function(r){var s={};j.collection("users").doc(e).get().then(function(e){e.exists&&(s=e.data())}).then(function(){s.lists[t].isCreated=!0,s.lists[t].name=a,j.collection("users").doc(e).set(s)}).then(function(){n(e)})}},shareList:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(r){var s={},l={email:e,cID:a};j.collection("users").doc(t).get().then(function(e){e.exists&&(s=e.data())}).then(function(){s.shares.push(l),j.collection("users").doc(t).set(s)}).then(function(){n&&n(t)})}},renameList:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(r){console.log(e+", "+t+", "+a);var s={};j.collection("users").doc(e).get().then(function(e){e.exists&&(s=e.data())}).then(function(){s.lists[t].name=a}).then(function(){j.collection("users").doc(e).set(s)}).then(function(){n&&n(e)})}},getUser:F})(P),B=(a(148),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onClickLogin=function(e){for(var t,n=!0,r=0;r<a.props.noofUsers;++r)if(a.state.inputEmail===a.props.userIDs[r]){n=!1;break}n?(t=-1===a.state.inputEmail.search("@")?a.state.inputEmail:a.state.inputEmail.substring(0,a.state.inputEmail.search("@")),a.setState({cUsername:t},function(){a.props.addUser(a.state.inputEmail,t,a.props.loginUser)})):a.login(a.state.inputEmail),e()},a.state={cUsername:"",inputEmail:"johnsmith@gmail.com"},a.onClickLogin=a.onClickLogin.bind(Object(S.a)(Object(S.a)(a))),a.createListEmailChange=a.createListEmailChange.bind(Object(S.a)(Object(S.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"login",value:function(e){var t=this;j.collection("users").doc(e).get().then(function(a){t.props.updateUser(a.data(),e)}).then(function(){t.setState({cUsername:t.props.cUser.name},function(){t.props.loginUser(!0)})}).then(function(){t.props.getFriendShareList(e)})}},{key:"renderUserLabel",value:function(){return this.props.isLoggedIn?"Welcome, "+this.state.cUsername:"Hello, Guest"}},{key:"createListEmailChange",value:function(e){this.setState({inputEmail:e.target.value})}},{key:"renderLoginButton",value:function(){var e=this;return this.props.isLoggedIn?null:r.a.createElement(A.a,{lockScroll:!0,trigger:r.a.createElement("button",{className:"login-button",onClick:function(){return e.onClickLogin()}},"Log In"),modal:!0},function(t){return r.a.createElement("div",{className:"modal-section",style:{textAlign:"center"}},r.a.createElement("div",{className:"modal-header"},"LOG IN/SIGN UP",r.a.createElement("span",{className:"modal-button-crossicon",onClick:function(){t()}},"\xd7")),r.a.createElement("div",{className:"modal-content"},"Enter your email address"),r.a.createElement("div",null,r.a.createElement("input",{className:"modal-input",type:"text",name:"Login",value:e.state.inputEmail,onChange:e.createListEmailChange})),r.a.createElement("span",null,r.a.createElement("button",{className:"modal-button-ok",onClick:function(){e.onClickLogin(t)}},"Log In")))})}},{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"50%",className:"login-header"},this.renderLoginButton()),r.a.createElement("th",{colSpan:"50%",className:"login-userlabel"},this.renderUserLabel()))}}]),t}(n.Component)),M=Object(p.b)(function(e){return{noofUsers:e.collections.items.length,userIDs:e.collections.IDs,cUser:e.login.cUser,isLoggedIn:e.login.isLoggedIn}},{loginUser:function(e){return function(t){t({type:"LOGIN_USER",payload:e})}},addUser:function(e,t){return function(a){var n={name:"Create New...",isCreated:!1,restaurants:[]},r={lists:[n,n,n],shares:[],name:t};j.collection("users").doc(e).set(r).then(function(){return a({type:"UPDATE_USER",payload:r,payloadEmail:e})}).then(function(){return a({type:"LOGIN_USER",payload:!0})})}},updateUser:function(e,t){return function(a){a({type:"UPDATE_USER",payload:e,payloadEmail:t})}},getFriendShareList:function(e){return function(t){var a=[];j.collection("users").doc(e).get().then(function(e){e.exists&&(a=e.data().shares)}).then(function(){return t({type:"GET_SHARE_LIST",payload:a})})}}})(B),G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).renderEachShared=function(e,t){if(0!==a.props.shareList.length){for(var n,s=0;s<a.props.userIDs.length;++s)a.props.userIDs[s]===e.email&&(n=a.props.users[s].lists[e.cID].name);return console.log(n),r.a.createElement("tr",{key:t},r.a.createElement("td",{colSpan:"35%"},r.a.createElement(H,{className:"list-button-shared",id:e.cID,isShared:!0,sharedName:n,sharedID:t,sharedEmail:e.email})),r.a.createElement("td",{colSpan:"65%"},"by ",e.email))}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"renderAllShared",value:function(){var e=this;return this.props.shareList.map(function(t,a){return e.renderEachShared(t,a)})}},{key:"renderCollectionHeader",value:function(){return this.props.isLoggedIn?r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"100%",className:"collection-header"},"YOUR COLLECTIONS")):r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"100%",className:"collection-header-loggedout",style:{textAlign:"center"}},"Login to see your collections!"))}},{key:"renderCollectionTable",value:function(){return this.props.isLoggedIn?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"33%"},r.a.createElement(H,{id:"0",className:"list-button0",isFriend:!1})),r.a.createElement("td",{colSpan:"33%"},r.a.createElement(H,{id:"1",className:"list-button1",isFriend:!1})),r.a.createElement("td",{colSpan:"34%"},r.a.createElement(H,{id:"2",className:"list-button2",isFriend:!1}))):null}},{key:"renderSharedHeader",value:function(){return this.props.isLoggedIn?0===this.props.cUser.shares.length?null:r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"100%",className:"collection-header"},"SHARED COLLECTIONS")):null}},{key:"renderSharedTable",value:function(){return this.props.isLoggedIn?0===this.props.cUser.shares.length?null:this.renderAllShared():null}},{key:"render",value:function(){return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement(M,null),this.renderCollectionHeader(),this.renderCollectionTable(),this.renderSharedHeader(),this.renderSharedTable()))}}]),t}(n.Component),Y=Object(p.b)(function(e){return{users:e.collections.items,userIDs:e.collections.IDs,shareList:e.collections.shareList,isLoggedIn:e.login.isLoggedIn,cUser:e.login.cUser}},{fetchUsers:function(){return function(e){var t=[],a=[];j.collection("users").get().then(function(e){e.docs.forEach(function(e){var n=e.data(),r=e.id;t.push(n),a.push(r)})}).then(function(){return e({type:"FETCH_USERS",payload:t,payloadID:a})})}},addShareList:function(e,t){return function(a){var n=e;n.push(t),a({type:"ADD_SHARE_LIST",payload:n})}}})(G),W=(a(150),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:N},r.a.createElement("div",{className:"app"},r.a.createElement("header",{className:"app-header"},r.a.createElement("h2",null,"IS IT OPEN?"),r.a.createElement("div",{className:"subtitle"},"Your one stop service for hunger pangs")),r.a.createElement(Y,null),r.a.createElement(R,null),r.a.createElement(x,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},69:function(e,t,a){},72:function(e,t,a){e.exports=a(152)},77:function(e,t,a){},84:function(e,t,a){}},[[72,2,1]]]);
//# sourceMappingURL=main.33e4369a.chunk.js.map